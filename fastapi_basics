from fastapi import FastAPI,HTTPException
from pydantic import BaseModel ,Field
from typing import Annotated

app=FastAPI()

product_list=[]
@app.get("/")
def get_all_product():
    return product_list

class ProductModel(BaseModel):
    product_id:int
    product_name:str
    product_amount:int

@app.post("/")
def add_product(product:ProductModel):
    product_list.append(product)
    return product

@app.put("/{product_id}")
def update_product(product_id:int , product:ProductModel):
    counter=0
    for x in product_list:
        counter +=1
        if x.product_id == product_id:
            product_list[counter -1]=product
            return product_list[counter -1]
    raise HTTPException(
            status_code=404,
            detail="product not  found"
        )

@app.delete("/{product_id}")
def delete_product(product_id:int):
    counter=0
    for x in product_list:
        counter += 1
        if x.product_id == product_id:
            del product_list[counter -1]
            return f"{product_id} is deleted"
    raise HTTPException(
        status_code=404,
        detail="product not found"
    )

